<!DOCTYPE html>
<html lang="de">
<head>
    <!-- Zeichensatz f√ºr die Webseite festlegen (UTF-8) -->
    <meta charset="UTF-8">
    <!-- Responsive Design: Passt die Ansicht an verschiedene Bildschirmgr√∂ssen an -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Titel der Webseite -->
    <title>Rezeptbuch</title>
    <style>
        /* Stil f√ºr den gesamten Text auf der Seite */
        body {
            font-family: Arial, sans-serif;
        }
        /* Stil f√ºr die Navigationsleiste */
        .navbar {
            background-color: #333; /* Dunkelgrauer Hintergrund */
            padding: 10px; /* Innenabstand */
            display: flex; /* Flexbox f√ºr Layout */
            justify-content: space-between; /* Abstand zwischen den Elementen */
        }
        /* Stil f√ºr Links in der Navigationsleiste */
        .navbar a {
            color: white; /* Weisse Schriftfarbe */
            text-decoration: none; /* Keine Unterstreichung */
            padding: 10px; /* Innenabstand */
        }
        /* Hover-Effekt f√ºr Links */
        .navbar a:hover {
            background-color: #555; /* Hintergrundfarbe √§ndert sich bei Hover */
        }
        /* Stil f√ºr die Tabelle */
        table {
            width: 100%; /* Tabellenbreite auf 100% setzen */
            border-collapse: collapse; /* Zusammenf√ºhren der R√§nder */
            margin-top: 20px; /* Abstand von oben */
        }
        table, th, td {
            border: 1px solid black; /* Schwarze R√§nder f√ºr Tabelle und Zellen */
        }
        /* Stil f√ºr Zellen */
        th, td {
            padding: 10px; /* Innenabstand */
            text-align: left; /* Text linksb√ºndig */
        }
        /* Stil f√ºr Tabellenkopf (√úberschrift) */
        th {
            background-color: #f2f2f2; /* Heller Hintergrund f√ºr Kopfzeilen */
        }
        /* Stil f√ºr den L√∂schen-Button */
        .delete-btn {
            background-color: red; /* Roter Hintergrund */
            color: white; /* Weisse Schriftfarbe */
            border: none; /* Keine R√§nder */
            padding: 5px 10px; /* Innenabstand */
            cursor: pointer; /* Zeiger-Cursor beim Hover */
        }
        /* Hover-Effekt f√ºr den L√∂schen-Button */
        .delete-btn:hover {
            background-color: darkred; /* Dunklerer Rotton bei Hover */
        }
    </style>
</head>
<body>

    <!-- Navigationsleiste mit Links -->
    <div class="navbar">
        <!-- Link zum Rezeptbuch -->
        <a href="{{ url_for('recipes') }}">üìñ Rezeptbuch</a>

        <!-- Bedingte Anzeige des Links zum Hinzuf√ºgen von Rezepten nur f√ºr den Rezeptverwalter -->
        {% if current_user.role == 'Rezepteverwalter' %}
            <a href="{{ url_for('add_recipe') }}">‚ûï Rezept hinzuf√ºgen</a>
        {% endif %}

        <!-- Link zum Logout -->
        <a href="{{ url_for('logout') }}">üö™ Logout</a>
    </div>

    <!-- Haupt√ºberschrift -->
    <h1>Rezeptbuch</h1>

    <!-- Tabelle f√ºr die Rezepte -->
    <table>
        <thead>
            <tr>
                <!-- Spalten√ºberschriften -->
                <th>Gericht</th>
                <th>Zutaten</th>
                <th>Zubereitung</th>
                <th>Kalorien</th>
                <th>Protein</th>
                <th>Kohlenhydrate</th>
                <th>Fett</th>
                <th>Ballaststoffe</th>

                <!-- Bedingte Anzeige der Spalte "Aktionen" nur f√ºr den Rezeptverwalter -->
                {% if current_user.role == 'Rezepteverwalter' %}
                    <th>Aktionen</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            <!-- Iteration durch die Rezeptliste -->
            {% for recipe in recipes %}
                <tr>
                    <!-- Anzeige der Rezeptdetails in den Zellen -->
                    <td>{{ recipe[1] }}</td>
                    <td>{{ recipe[2] }}</td>
                    <td>{{ recipe[3] }}</td>
                    <td>{{ recipe[4] if recipe[4] else 'N/A' }}</td>
                    <td>{{ recipe[5] if recipe[5] else 'N/A' }}</td>
                    <td>{{ recipe[6] if recipe[6] else 'N/A' }}</td>
                    <td>{{ recipe[7] if recipe[7] else 'N/A' }}</td>
                    <td>{{ recipe[8] if recipe[8] else 'N/A' }}</td>

                    <!-- Bedingte Anzeige der L√∂schoption nur f√ºr den Rezeptverwalter -->
                    {% if current_user.role == 'Rezepteverwalter' %}
                        <td>
                            <!-- Formular f√ºr das L√∂schen eines Rezepts -->
                            <form method="POST" action="{{ url_for('delete_recipe', recipe_id=recipe[0]) }}" onsubmit="return confirm('M√∂chtest du dieses Rezept wirklich l√∂schen?');">
                                <!-- L√∂schen-Button -->
                                <button type="submit" class="delete-btn">L√∂schen</button>
                            </form>
                        </td>
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>

</body>
</html>
